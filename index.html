<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>3D Smartphone Configurator PRO</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì±</text></svg>">
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; touch-action: none; }
        #ui { position: absolute; top: 10px; left: 10px; z-index: 100; background: rgba(0,0,0,0.8); padding: 12px; border-radius: 12px; color: white; border: 1px solid #444; width: 160px; pointer-events: auto; }
        input { width: 100%; cursor: pointer; margin: 8px 0; }
        label { font-size: 10px; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .donate-btn { display: block; background: #f0c419; color: #000; text-align: center; padding: 8px; border-radius: 6px; text-decoration: none; font-weight: bold; font-size: 11px; transition: 0.3s; margin-top: 10px; }
        
        @media (max-width: 480px) {
            #ui { width: 130px; padding: 10px; top: 5px; left: 5px; }
            label { font-size: 9px; }
        }
    </style>
</head>
<body>

<div id="ui">
    <label>–ö–æ–ª—ñ—Ä –∫–æ—Ä–ø—É—Å—É</label>
    <input type="color" id="color" value="#333333">
    
    <label>–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å</label>
    <input type="range" id="alpha" min="0.1" max="1" step="0.1" value="1">

    <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #333;">
        <a href="https://www.buymeacoffee.com/" target="_blank" class="donate-btn">‚òï –ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏</a>
    </div>
</div>

<script src="https://unpkg.com/three@0.128.0/build/three.min.js"></script>

<script>
    let scene, camera, renderer, phone, isDragging = false;
    let prevMouse = { x: 0, y: 0 };
    let phoneBody;

    init();
    animate();

    function init() {
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x050505);

        const isMobile = window.innerWidth < 480;
        camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = isMobile ? 7.5 : 5.5;

        renderer = new THREE.WebGLRenderer({ antialias: true, powerPreference: "high-performance" });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); 
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const mainLight = new THREE.DirectionalLight(0xffffff, 2);
        mainLight.position.set(5, 10, 7.5);
        scene.add(mainLight);

        const fillLight = new THREE.PointLight(0xffffff, 1.2);
        fillLight.position.set(-5, 0, 5);
        scene.add(fillLight);

        buildPhone();

        // Mouse events
        document.addEventListener('mousedown', (e) => { isDragging = true; prevMouse = { x: e.clientX, y: e.clientY }; });
        document.addEventListener('mouseup', () => isDragging = false);
        document.addEventListener('mousemove', handleMove);

        // Touch events
        document.addEventListener('touchstart', (e) => {
            isDragging = true;
            prevMouse = { x: e.touches[0].clientX, y: e.touches[0].clientY };
        }, { passive: false });
        document.addEventListener('touchend', () => isDragging = false);
        document.addEventListener('touchmove', (e) => {
            if (isDragging) {
                if (e.cancelable) e.preventDefault();
                handleMove(e.touches[0]);
            }
        }, { passive: false });
    }

    function handleMove(e) {
        if(isDragging && phone) {
            const deltaX = e.clientX - prevMouse.x;
            const deltaY = e.clientY - prevMouse.y;
            phone.rotation.y += deltaX * 0.007;
            phone.rotation.x += deltaY * 0.007;
        }
        prevMouse = { x: e.clientX, y: e.clientY };
    }

    function createRoundedShape(w, h, r) {
        const s = new THREE.Shape();
        s.moveTo(-w/2+r, -h/2); s.lineTo(w/2-r, -h/2);
        s.quadraticCurveTo(w/2, -h/2, w/2, -h/2+r); s.lineTo(w/2, h/2-r);
        s.quadraticCurveTo(w/2, h/2, w/2-r, h/2); s.lineTo(-w/2+r, h/2);
        s.quadraticCurveTo(-w/2, h/2, -w/2, h/2-r); s.lineTo(-w/2, -h/2+r);
        s.quadraticCurveTo(-w/2, -h/2, -w/2+r, -h/2);
        return s;
    }

    function buildPhone() {
        phone = new THREE.Group();
        const col = document.getElementById('color').value;
        const op = parseFloat(document.getElementById('alpha').value);
        const thick = 0.05, w = 1.1, h = 2.2, r = 0.18;

        // –ö–æ—Ä–ø—É—Å
        const shape = createRoundedShape(w, h, r);
        const bodyGeom = new THREE.ExtrudeGeometry(shape, { depth: thick, bevelEnabled: true, bevelThickness: 0.01, bevelSize: 0.01 });
        const bodyMat = new THREE.MeshStandardMaterial({ color: col, metalness: 0.9, roughness: 0.1, transparent: true, opacity: op });
        phoneBody = new THREE.Mesh(bodyGeom, bodyMat);
        phoneBody.position.z = -thick/2;
        phone.add(phoneBody);

        // –ï–∫—Ä–∞–Ω
        const canvas = document.createElement('canvas');
        canvas.width = 512; canvas.height = 1024;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#000'; ctx.fillRect(0, 0, 512, 1024);
        ctx.fillStyle = '#00ff88'; ctx.font = 'bold 80px Arial'; ctx.textAlign = 'center';
        ctx.fillText('LOGIN', 256, 512);

        const screenTex = new THREE.CanvasTexture(canvas);
        const screenMat = new THREE.MeshPhongMaterial({ map: screenTex, emissive: '#00ff88', emissiveIntensity: 0.2 });
        const screen = new THREE.Mesh(new THREE.PlaneGeometry(w - 0.08, h - 0.08), screenMat);
        screen.position.z = (thick/2) + 0.012; 
        phone.add(screen);

        // –î–ï–¢–ê–õ–Ü (–ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–Ω–æ–ø–∫–∏, –∫–∞–º–µ—Ä–∏ —Ç–∞ –ø–æ—Ä—Ç)
        const blackMat = new THREE.MeshBasicMaterial({color: 0x000000});
        
        // –ü–æ—Ä—Ç –∑–∞—Ä—è–¥–∫–∏
        const port = new THREE.Mesh(new THREE.BoxGeometry(0.18, 0.015, 0.04), blackMat);
        port.position.set(0, -h/2 - 0.01, 0);
        phone.add(port);

        // –ö–Ω–æ–ø–∫–∞ –∂–∏–≤–ª–µ–Ω–Ω—è
        const pwr = new THREE.Mesh(new THREE.BoxGeometry(0.015, 0.18, 0.04), blackMat);
        pwr.position.set(w/2 + 0.01, 0.4, 0);
        phone.add(pwr);

        // –ë–ª–æ–∫ –∫–∞–º–µ—Ä
        const camBox = new THREE.Mesh(new THREE.BoxGeometry(0.42, 0.42, 0.04), blackMat);
        camBox.position.set(-0.25, 0.8, -thick/2 - 0.02);
        phone.add(camBox);

        for(let i=0; i<4; i++) {
            const lens = new THREE.Mesh(new THREE.CircleGeometry(0.075, 16), new THREE.MeshPhongMaterial({color: 0x080808, shininess: 200}));
            lens.position.set((i%2?-0.15:-0.35), (i<2?0.9:0.7), -thick/2 - 0.045);
            lens.rotation.y = Math.PI;
            phone.add(lens);
        }

        scene.add(phone);
    }

    document.getElementById('color').oninput = (e) => {
        if (phoneBody) phoneBody.material.color.set(e.target.value);
    };

    document.getElementById('alpha').oninput = (e) => {
        if (phoneBody) phoneBody.material.opacity = parseFloat(e.target.value);
    };

    function animate() {
        requestAnimationFrame(animate);
        if (phone && !isDragging) {
            phone.rotation.y += 0.005;
            phone.position.y = Math.sin(Date.now() * 0.001) * 0.03;
        }
        renderer.render(scene, camera);
    }

    window.onresize = () => {
        const width = window.innerWidth;
        const height = window.innerHeight;
        camera.aspect = width / height;
        camera.position.z = width < 480 ? 7.5 : 5.5;
        camera.updateProjectionMatrix();
        renderer.setSize(width, height);
    };
</script>
</body>
</html>
